(function(){angular.module("myApp","ngRoute myApp.controllers myApp.filters myApp.services myApp.directives textAngular ui.bootstrap ui.sortable".split(" ")).config(function(a,b){a.when("/:title",{templateUrl:"partials/site",controller:"SiteController"}).when("/product/show/:id/:name",{templateUrl:"partials/product",controller:"StoreControllerOne"}).when("/products/show/:category",{templateUrl:"partials/productCategory",controller:"StoreControllerCategory"}).when("/",{templateUrl:"partials/main",
controller:"IndexController"}).when("/products/show",{templateUrl:"partials/products",controller:"ProductsController"});b.html5Mode(!0)})}).call(this);angular.module("myApp.controllers",[]).controller("AppCtrl",function(a,b,e,c,f){a.Page=e;f.async().then(function(d){a.settings=d;e.setTitle2(" - "+a.settings.title);return e.setDescription(a.settings.description)});c.async().then(function(d){return a.categories=d});return b.get("/api/sites").success(function(d){a.sites=d;console.log(d)}).error(function(a){console.log("Error: "+a)})}).controller("IndexController",["$scope","$http","$routeParams","Page","Settings",function(a,b,e,c,f){f.async().then(function(d){a.settings=
d;return c.setTitle(a.settings.indexTitle)});return b.get("/api/site/index").success(function(d){a.site=d;console.log(a.site)}).error(function(a){console.log("Error: "+a)})}]).controller("SiteController",["$scope","$http","$routeParams","Page",function(a,b,e,c){return b.get("/api/site/"+e.title).success(function(f){a.site=f;c.setTitle(a.site.title);console.log(a.site);console.log(f.added)}).error(function(a){console.log("Error: "+a)})}]).controller("StoreControllerOne",["$scope","$http","$routeParams",
"Page",function(a,b,e,c){a.formReview={};b.get("/api/product/"+e.id).success(function(f){a.product=f;c.setTitle(a.product.name);console.log(f)}).error(function(a){console.log("Error: "+a)});a.addReview=function(f,d){var c;console.log(f);c=a.formReview;b.post("/api/product/review/"+f,a.formReview).success(function(a){d.reviews.push(c);console.log(a)}).error(function(a){console.log("Error: "+a)});a.formReview={}}}]).controller("StoreControllerCategory",["$scope","$http","$routeParams","Page",function(a,
b,e,c){a.category=e.category;a.formReview={};b.get("/api/products/"+e.category).success(function(f){a.products=f;c.setTitle(e.category);console.log(f)}).error(function(a){console.log("Error: "+a)});a.addReview=function(f,d){var c;console.log(f);c=a.formReview;b.post("/api/product/review/"+f,a.formReview).success(function(a){d.reviews.push(c);console.log(a)}).error(function(a){console.log("Error: "+a)});a.formReview={}}}]).controller("ProductsController",["$scope","$http","$routeParams","Page","Settings",
function(a,b,e,c,f){a.formReview={};f.async().then(function(d){a.settings=d;return c.setTitle(a.settings.productsTitle)});b.get("/api/products").success(function(d){a.products=d;console.log(d)}).error(function(a){console.log("Error: "+a)});a.addReview=function(d,c){var f;console.log(d);f=a.formReview;b.post("/api/product/review/"+d,a.formReview).success(function(a){c.reviews.push(f);console.log(a)}).error(function(a){console.log("Error: "+a)});a.formReview={}}}]).controller("AdminControllerSettings",
["$scope","$http","$routeParams","Page","Settings",function(a,b,e,c,f){a.formSettings={};f.async().then(function(d){a.formSettings=d;c.setTitle("Admin Panel");return c.setTitle2(" - "+a.formSettings.title)});a.editSettings=function(){console.log(a.formSettings);b.post("/api/settings",a.formSettings).success(function(d){a.formSettings=d;console.log(d)}).error(function(a){console.log("Error: "+a)})};return a.addSettings=function(){a.formSettings.title="Gemstore.com";a.formSettings.footer="Footer";a.formSettings.indexTitle=
"Main Page";a.formSettings.description="Description of Gemstore.com";b.post("/api/asettings",a.formSettings).success(function(d){a.settings=d;console.log(d)}).error(function(a){console.log("Error: "+a)})}}]).controller("AdminControllerSites",["$scope","$http","$routeParams",function(a,b,e){a.formSite={};a.isCollapsedAdd=!0;a.formEditSite={};a.isCollapsedEdit=[];a.isCollapsedShow=[];a.sitesOrder=[];b.get("/api/sites").success(function(c){var f,d,b;a.sites=c;f=d=0;for(b=a.sites.length-1;d<=b;f=d+=1)a.isCollapsedEdit[f]=
!0,a.isCollapsedShow[f]=!0;console.log(c)}).error(function(a){console.log("Error: "+a)});a.addSite=function(){console.log(a.formSite.title);b.post("/api/site",a.formSite).success(function(c){var f,d,b;a.sites=c;f=d=0;for(b=a.sites.length-1;d<=b;f=d+=1)a.isCollapsedEdit[f]=!0,a.isCollapsedShow[f]=!0;console.log(c)}).error(function(a){console.log("Error: "+a)});a.formReview={}};a.startEditSite=function(c,f){console.log(c);b.get("/api/site/"+c).success(function(d){var c,b,e;a.formEditSite=d;c=b=0;for(e=
a.sites.length-1;b<=e;c=b+=1)a.isCollapsedEdit[c]=!0;a.isCollapsedEdit[f]=!a.isCollapsedEdit[f];console.log(d)}).error(function(a){console.log("Error: "+a)})};a.editSite=function(c){console.log(a.formEditSite.title+c._id);b.post("/api/site/"+c._id,a.formEditSite).success(function(a){c.title=a.title;c.content=a.content;console.log(a)}).error(function(a){console.log("Error: "+a)})};a.deleteSite=function(c){confirm("Are you sure to delete this site?")&&b["delete"]("/api/site/"+c).success(function(c){var d,
b,e;a.sites=c;d=b=0;for(e=a.sites.length-1;b<=e;d=b+=1)a.isCollapsedEdit[d]=!0,a.isCollapsedShow[d]=!0;console.log(c)}).error(function(a){console.log("Error: "+a)})};a.sortableOptions={stop:function(c,f){var d,b,e;d=b=0;for(e=a.sites.length-1;b<=e;d=b+=1)a.sitesOrder[d]=a.sites[d]._id;return console.log(a.sitesOrder)}};a.saveOrder=function(){b.post("/api/sites/order",a.sitesOrder);b.get("/api/sites").success(function(c){var f,d,b;a.sites=c;f=d=0;for(b=a.sites.length-1;d<=b;f=d+=1)a.isCollapsedEdit[f]=
!0,a.isCollapsedShow[f]=!0;console.log(c)}).error(function(a){console.log("Error: "+a)})}}]).controller("AdminControllerCategories",["$scope","$http","$routeParams",function(a,b,e){a.formCategory={};a.isCollapsedAdd=!0;a.formEditCategory={};a.isCollapsedEdit=[];a.isCollapsedShow=[];b.get("/api/categories").success(function(c){var f,d,b;a.categories=c;f=d=0;for(b=a.categories.length-1;d<=b;f=d+=1)a.isCollapsedEdit[f]=!0,a.isCollapsedShow[f]=!0;console.log(c)}).error(function(a){console.log("Error: "+
a)});a.addCategory=function(){console.log(a.formCategory.name);b.post("/api/category",a.formCategory).success(function(c){var f,d,b;a.categories=c;f=d=0;for(b=a.categories.length-1;d<=b;f=d+=1)a.isCollapsedEdit[f]=!0,a.isCollapsedShow[f]=!0;console.log(c)}).error(function(a){console.log("Error: "+a)});a.formReview={}};a.startEditCategory=function(c,f){b.get("/api/category/"+c).success(function(d){var c,b,e;a.formEditCategory=d;c=b=0;for(e=a.categories.length-1;b<=e;c=b+=1)a.isCollapsedEdit[c]=!0;
a.isCollapsedEdit[f]=!a.isCollapsedEdit[f];console.log(d)}).error(function(a){console.log("Error: "+a)})};a.editCategory=function(c){console.log(a.formEditCategory.name+c._id);b.post("/api/category/"+c._id+"/"+c.name,a.formEditCategory).success(function(a){c.name=a.name;console.log(a)}).error(function(a){console.log("Error: "+a)})};a.showProducts=function(c,f){b.get("/api/products/"+c).success(function(c){var b,e,h;a.products=c;b=e=0;for(h=a.categories.length-1;e<=h;b=e+=1)a.isCollapsedShow[b]=!0;
a.isCollapsedShow[f]=!a.isCollapsedShow[f];console.log(c)}).error(function(a){console.log("Error: "+a)})};a.deleteCategory=function(c){confirm("Are you sure to delete this category with all products?")&&b["delete"]("/api/category/"+c._id+"/"+c.name).success(function(c){var d,b,e;a.categories=c;d=b=0;for(e=a.categories.length-1;b<=e;d=b+=1)a.isCollapsedEdit[d]=!0,a.isCollapsedShow[d]=!0;console.log(c)}).error(function(a){console.log("Error: "+a)})}}]).controller("AdminControllerProducts",["$scope",
"$http","$routeParams",function(a,b,e){a.formData={};a.formImage={};a.formEdit={};a.isCollapsedAdd=!0;a.isCollapsedEdit=[];a.isCollapsedShow=[];b.get("/api/products").success(function(c){var b,d,e;a.products=c;b=d=0;for(e=a.products.length-1;d<=e;b=d+=1)a.isCollapsedEdit[b]=!0,a.isCollapsedShow[b]=!0;console.log(c)}).error(function(a){console.log("Error: "+a)});b.get("/api/categories").success(function(c){a.categories=c;console.log(c)}).error(function(a){console.log("Error: "+a)});a.refreshCategories=
function(){return b.get("/api/categories").success(function(c){a.categories=c;console.log(c)}).error(function(a){console.log("Error: "+a)})};a.addProduct=function(){console.log(a.formData.category);b.post("/api/product",a.formData).success(function(c){var b,d,e;a.formData={};a.products=c;b=d=0;for(e=a.products.length-1;d<=e;b=d+=1)a.isCollapsedEdit[b]=!0,a.isCollapsedShow[b]=!0;console.log(c)}).error(function(a){console.log("Error: "+a)})};a.deleteProduct=function(c){confirm("Are you sure to delete this product?")&&
b["delete"]("/api/product/"+c).success(function(b){var c,e,g;a.products=b;c=e=0;for(g=a.products.length-1;e<=g;c=e+=1)a.isCollapsedEdit[c]=!0,a.isCollapsedShow[c]=!0;console.log(b)}).error(function(a){console.log("Error: "+a)})};a.startEditProduct=function(c,f){console.log(c);a.editing=!0;b.get("/api/product/"+c).success(function(b){var c,e,h;a.formEdit=b;c=e=0;for(h=a.products.length-1;e<=h;c=e+=1)a.isCollapsedEdit[c]=!0;a.isCollapsedEdit[f]=!a.isCollapsedEdit[f];console.log(b)}).error(function(a){console.log("Error: "+
a)})};a.editProduct=function(c){b.post("/api/product/"+c._id,a.formEdit).success(function(b){c.name=b.name;c.price=b.price;c.description=b.description;c.category=b.category;a.editing=!1;console.log(b)}).error(function(a){console.log("Error: "+a)})};a.addReview=function(c,e){var d;console.log(c);d=a.formReview;b.post("/api/product/review/"+c,a.formReview).success(function(a){e.reviews.push(d);console.log(a)}).error(function(a){console.log("Error: "+a)});a.formReview={}};a.imagesChanged=function(b){a.files=
b.files;a.$apply();console.log(a.files)};a.addImages=function(c){var e,d,k,g;e=a.files;d=k=0;for(g=e.length;k<g;d=++k)e=new FormData,e.append("file",a.files[d]),console.log(a.files[d]),b.post("/api/productImage/"+c,e,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(b){a.products=b;console.log(b)}).error(function(a){console.log("Error: "+a)});a.formData={};a.files={}};a.deleteImage=function(c,e){confirm("Are you sure to delete this image?")&&
(a.formImage.name=e,b["delete"]("/api/productImage/"+c+"/"+e).success(function(b){a.products=b;console.log(b)}).error(function(a){console.log("Error: "+a)}),a.formImage={})}}]).controller("PanelController",["$scope","$http",function(a,b){a.tab=1;a.selectTab=function(b){a.tab=b};a.isSelected=function(b){return a.tab===b}}]).controller("AdminEditPanelController",["$scope","$http",function(a,b){a.tab=1;a.selectTab=function(b){a.tab=b};a.isSelected=function(b){return a.tab===b}}]).controller("AdminPanelController",
["$scope","$http",function(a,b){a.tab=1;a.selectTab=function(b){a.tab=b};a.isSelected=function(b){return a.tab===b}}]).controller("GalleryController",function(a,b){a.current=0;a.setCurrent=function(b){a.current=b||0;console.log("asd")}});angular.module("myApp.directives",[]).directive("appVersion",function(a){return function(b,e,c){e.text(a)}}).directive("productTitle",function(){return{restrict:"A",templateUrl:"partials/templates/product-title"}}).directive("adminSettings",function(){return{restrict:"A",templateUrl:"partials/admin/settings"}}).directive("adminSites",function(){return{restrict:"A",templateUrl:"partials/admin/sites"}}).directive("adminCategories",function(){return{restrict:"A",templateUrl:"partials/admin/categories"}}).directive("adminProducts",
function(){return{restrict:"A",templateUrl:"partials/admin/products"}}).directive("productPanels",function(){return{restrict:"A",templateUrl:"partials/templates/product-panels",controller:function(){this.tab=1;this.selectTab=function(a){return this.tab=a};return this.isSelected=function(a){return this.tab===a}},controllerAs:"panels"}}).directive("productGallery",function(){return{restrict:"A",templateUrl:"partials/templates/product-gallery",controller:function(){this.current=0;this.setCurrent=function(a){this.current=
a||0}},controllerAs:"gallery"}}).directive("scroll",function(a){return function(b,e,c){return angular.element(a).bind("scroll",function(){100<=this.pageYOffset?(b.boolChangeClass=!0,console.log("Scrolled below header.")):(b.boolChangeClass=!1,console.log("Header is in view."));return b.$apply()})}});(function(){angular.module("myApp.filters",[]).filter("interpolate",function(a){return function(b){return String(b).replace(/\%VERSION\%/mg,a)}})}).call(this);angular.module("myApp.services",[]).value("version","0.2").factory("Page",function(){var a,b,e;b="Loading";e="...";a="";return{title:function(){return b},setTitle:function(a){return b=a},title2:function(){return e},setTitle2:function(a){return e=a},description:function(){return a},setDescription:function(b){return a=b}}}).factory("Categories",function(a){return{async:function(){var b;b||(b=a.get("/api/categories").then(function(a){console.log(a);return a.data}));return b}}}).factory("Settings",function(a){return{async:function(){var b;
b||(b=a.get("/api/settings").then(function(a){console.log(a);return a.data}));return b}}});
